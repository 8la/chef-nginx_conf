# Maintained by Chef.  Any manual changes will be overwritten

<% if !@upstream.empty? %><%= nginx_conf_options(@upstream,0,'upstream') %><% end %>
server {
  listen <%= @listen %>;
  server_name <%= @server_name %>;
  <% if @ssl %>ssl_certificate <%= @ssl[:certificate] %>;
  ssl_certificate_key <% @ssl[:certiciate_key] %>;<% end %>
  <% if @root %>root <%= @root %>;<% end %>
  <% Array(@block).each do |b| %>

  <%= b %>
  <% end -%>

<%= nginx_conf_options(@options, 1) %>
<% unless @type == :static %><%= nginx_conf_options(@locations, 1, 'locations') %><% end %>
}